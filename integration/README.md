# Интеграция

- [Интеграция](#интеграция)
  - [Подсистема "Входящая очередь"](#подсистема-входящая-очередь)
  - [Подсистема "Дозапросы"](#подсистема-дозапросы)
  - [Подсистема "Отложенное проведение"](#подсистема-отложенное-проведение)
  - [Подсистема "Задания отложенной обработки данных"](#подсистема-задания-отложенной-обработки-данных)
  - [Подсистема "Сборщик"](#подсистема-сборщик)
    - [Объекты подсистемы](#объекты-подсистемы)
    - [Примеры использования](#примеры-использования)
    - [Взаимодействие с DATAREON ESB](#взаимодействие-с-datareon-esb)

## Подсистема "Входящая очередь"

Подсистема предназначена для организации внутренних очередей из сообщений интеграции, поступающих на обработку из DATAREON ESB.

[Подсистема "Входящая очередь"](/integration/inqueue)

## Подсистема "Таблица переходных ключей"

[Подсистема "Таблица переходных ключей"](/integration/tkt)

Подсистема предназначена для хранения индентификатаров объектов интеграционных систем.

## Подсистема "Дозапросы"

Подсистема предназначена для отправка запросов в системы интеграционного контура.

[Подсистема "Дозапросы"](/integration/adrequest)

## Подсистема "Отложенное проведение"

Подсистема предназначена для отложенного проведения документов сформированные интеграцией.

[Подсистема "Отложенное проведение"](/integration/postponed)

## Подсистема "Задания отложенной обработки данных"

Подсистема предназначена для передачи промежуточных результатов обработки сообщений Datareon ESB при повторной обработке.

[Подсистема "Задания отложенной обработки данных"](/integration/deferredtasks)

## Подсистема "Сборщик"

Подсистема предназначена для сборки объекта состоящего из итеграционных икрементов ( объектов ).

### Объекты подсистемы

- **Справочник "Объекты (Градум)"** - служебное хранилище интеграционных инкрементов объекта с частично разобранными данными из xml пакета.

![Элемент справочника Объекты (Градум)  ](ЭлементСправочникаОбъекты.png)

- **Справочник "Типы объектов (Градум)"** - служебное хранилище типов интеграционных объектов с описанием алгоритма сборки составного объекта.

![Элемент справочника Типы объектов (Градум)](ЭлементТипыОбъектов.png)

- **Константа "Сборка комплексных объектов"** - включает сборку объектов при вызове обработчиков сборки интеграции.
- [**Cлужебный обработчик "Служебный_ВыполнитьАлгоритмСборки.in"**](Служебный_ВыполнитьАлгоритмСборки.in.bsl) - служебный исходящий обработчик Datareon ESB для вызова алгоритма сборки.

### Примеры использования

```bsl
  спрИмяТипаОбъекта = "Документ.Списание";
  ИдентификаторОбъекта = Ключ;
  Выполнить(грОбработкаПакетовИнтеграции.ПолучитьТекстОбработчика("ВыполнитьАлгоритмСборки",
    Перечисления.сшпТипыИнтеграции.Исходящая));
```

### Взаимодействие с DATAREON ESB

В качестве репозитория хранения алгоритмов справочника "Типы объектов (Градум) могут выступать обработчики DATAREON ESB.
Для включения данного функционала требуется:

1. Подключить информационную систему к DATAREON ESB.
2. Указать в настройке по умолчанию "*ПрефиксОбработчиковСборки". Поиск обработчиков выполняется по шаблону [ПрефиксОбработчиковСборки]+[%].
3. Вызвать команду "Обновить алгоритмы сборки из ESB".

![Алгоритм справочника Типы объектов (Градум)](АлгоритмыТипыОбъектов.png)
